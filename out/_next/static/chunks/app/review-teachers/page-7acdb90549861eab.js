(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{3101:function(e,n,r){Promise.resolve().then(r.bind(r,6389))},172:function(e,n,r){"use strict";r.d(n,{I8:function(){return c},db:function(){return o}});var i=r(2730),s=r(6142),a=r(8121),l=r(4905);let t=(0,s.C6)().length?(0,s.Mq)():(0,s.ZF)({apiKey:"AIzaSyDAFvOw8ZZFDqqVVHLCUgnQWUIGBwdLgiQ",authDomain:"imsinger-reserve.firebaseapp.com",projectId:"imsinger-reserve",storageBucket:"imsinger-reserve.appspot.com",messagingSenderId:"1076968010737",appId:"1:1076968010737:web:f78fe1277af94eea9d8a50",measurementId:"G-02TY9RDH06"}),c=(0,i.v0)(t),o=(0,a.ad)(t);(0,l.cF)(t)},6389:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return y}});var i=r(3827),s=r(4090),a=r(8121),l=r(172),t=r(8525),c=r(2647),o=r(7122),d=r(9960),h=r(4693),u=r(6348),m=r(3048),x=r(1419),p=r(8523),g=r(7333),j=r(414),f=r(2342),b=r(8696),v=r(9372),C=r(9312),w=r(203),k=r(4691);function y(){var e,n,r,y;let[S,D]=(0,s.useState)([]),[I,z]=(0,s.useState)(""),[_,F]=(0,s.useState)(""),[A,L]=(0,s.useState)(!0),[T,W]=(0,s.useState)(null),[E,J]=(0,s.useState)([]),{isOpen:O,onOpen:U,onClose:q}=(0,t.q)();(0,c.p)();let Z=async()=>{let e=(0,a.IO)((0,a.hJ)(l.db,"pendingTeachers"),(0,a.Xo)("createdAt",A?"desc":"asc"));D((await (0,a.PL)(e)).docs.map(e=>({id:e.id,...e.data()})))};(0,s.useEffect)(()=>{Z()},[A]);let B=async e=>{if(confirm("".concat(e.name," 강사를 승인하시겠습니까?")))try{await (0,a.pl)((0,a.JU)(l.db,"teachers",e.name),{name:e.name,email:e.email,availableTimes:[]}),await (0,a.ET)((0,a.hJ)(l.db,"notifications"),{to:"admin",message:"".concat(e.name," 님이 강사로 등록되었습니다."),createdAt:new Date}),await (0,a.oe)((0,a.JU)(l.db,"pendingTeachers",e.id)),z("".concat(e.name," 강사 등록 완료")),Z()}catch(e){z("오류: ".concat(e.message))}},G=async e=>{confirm("정말 거절하시겠습니까?")&&(await (0,a.oe)((0,a.JU)(l.db,"pendingTeachers",e)),z("거절 처리 완료"),Z())},K=S.filter(e=>e.name.toLowerCase().includes(_.toLowerCase())),N=e=>{J(n=>n.includes(e)?n.filter(n=>n!==e):[...n,e])},P=e=>{let n=/(https?:\/\/[^\s]+)/g;return e.split(n).map((e,r)=>e.match(n)?(0,i.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",style:{color:"#805AD5"},children:e},r):(0,i.jsx)("span",{children:e},r))};return(0,i.jsxs)(o.W,{maxW:"xl",py:10,fontFamily:"'Pretendard', sans-serif",children:[(0,i.jsx)(d.X,{size:"lg",mb:6,bgGradient:"linear(to-r, purple.500, purple.800)",bgClip:"text",children:"\uD83D\uDD12 관리자 전용: 강사 등록 요청 검토"}),(0,i.jsx)(h.I,{placeholder:"이름으로 검색",value:_,onChange:e=>F(e.target.value),mb:4,focusBorderColor:"purple.500",bg:"white",rounded:"lg"}),(0,i.jsx)(u.X,{isChecked:A,onChange:e=>L(e.target.checked),mb:6,colorScheme:"purple",children:"최신순 정렬"}),(0,i.jsx)(m.g,{spacing:5,align:"stretch",children:0===K.length?(0,i.jsx)(x.x,{color:"gray.500",children:"등록 요청이 없습니다."}):K.map(e=>{let n=E.includes(e.id);return(0,i.jsxs)(p.x,{bg:"gray.50",borderWidth:1,borderRadius:"xl",p:6,boxShadow:"sm",children:[(0,i.jsxs)(x.x,{fontWeight:"semibold",color:"gray.700",children:["이름: ",(0,i.jsx)(x.x,{as:"span",color:"purple.600",cursor:"pointer",onClick:()=>{W(e),U()},children:e.name})]}),(0,i.jsxs)(x.x,{color:"gray.600",children:["이메일: ",e.email]}),(0,i.jsxs)(x.x,{color:"gray.600",children:["소개: ",e.bio?n?(0,i.jsxs)(i.Fragment,{children:[P(e.bio)," ",(0,i.jsx)(g.z,{variant:"link",size:"sm",colorScheme:"purple",onClick:()=>N(e.id),children:"간략히"})]}):(0,i.jsxs)(i.Fragment,{children:[e.bio.slice(0,100),"... ",(0,i.jsx)(g.z,{variant:"link",size:"sm",colorScheme:"purple",onClick:()=>N(e.id),children:"더보기"})]}):"-"]}),(0,i.jsxs)(j.K,{direction:"row",spacing:3,mt:4,children:[(0,i.jsx)(g.z,{colorScheme:"purple",onClick:()=>B(e),rounded:"full",children:"승인"}),(0,i.jsx)(g.z,{variant:"outline",colorScheme:"red",onClick:()=>G(e.id),rounded:"full",children:"거절"})]})]},e.id)})}),(0,i.jsxs)(f.u_,{isOpen:O,onClose:q,isCentered:!0,children:[(0,i.jsx)(b.Z,{}),(0,i.jsxs)(v.h,{children:[(0,i.jsx)(C.x,{children:"강사 상세 정보"}),(0,i.jsx)(w.o,{}),(0,i.jsx)(k.f,{children:T&&(0,i.jsxs)(j.K,{spacing:3,py:4,children:[(0,i.jsxs)(x.x,{children:[(0,i.jsx)("strong",{children:"이름:"})," ",T.name]}),(0,i.jsxs)(x.x,{children:[(0,i.jsx)("strong",{children:"이메일:"})," ",T.email]}),(0,i.jsxs)(x.x,{children:[(0,i.jsx)("strong",{children:"소개:"})," ",P(T.bio||"-")]}),(0,i.jsxs)(x.x,{children:[(0,i.jsx)("strong",{children:"신청일:"})," ",(null===(r=T.createdAt)||void 0===r?void 0:null===(n=r.toDate)||void 0===n?void 0:null===(e=(y=n.call(r)).toLocaleString)||void 0===e?void 0:e.call(y))||"-"]})]})})]})]}),I&&(0,i.jsx)(x.x,{mt:6,color:"green.500",fontWeight:"medium",children:I})]})}}},function(e){e.O(0,[358,315,719,677,402,68,378,944,971,69,560],function(){return e(e.s=3101)}),_N_E=e.O()}]);