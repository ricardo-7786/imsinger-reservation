(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[422],{7211:function(e,r,t){Promise.resolve().then(t.bind(t,433))},172:function(e,r,t){"use strict";t.d(r,{I8:function(){return o},db:function(){return d}});var n=t(2730),i=t(6142),s=t(8121),a=t(4905);let l=(0,i.C6)().length?(0,i.Mq)():(0,i.ZF)({apiKey:"AIzaSyDAFvOw8ZZFDqqVVHLCUgnQWUIGBwdLgiQ",authDomain:"imsinger-reserve.firebaseapp.com",projectId:"imsinger-reserve",storageBucket:"imsinger-reserve.appspot.com",messagingSenderId:"1076968010737",appId:"1:1076968010737:web:f78fe1277af94eea9d8a50",measurementId:"G-02TY9RDH06"}),o=(0,n.v0)(l),d=(0,s.ad)(l);(0,a.cF)(l)},433:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return C}});var n=t(3827),i=t(6049),s=t(7122),a=t(4084),l=t(8523),o=t(9960),d=t(1419),c=t(5483),u=t(1890),h=t(3048),m=t(1698),x=t(7333),f=t(2008);let p=(0,f.I)({displayName:"CalendarIcon",viewBox:"0 0 14 14",d:"M10.8889,5.5 L3.11111,5.5 L3.11111,7.05556 L10.8889,7.05556 L10.8889,5.5 Z M12.4444,1.05556 L11.6667,1.05556 L11.6667,0 L10.1111,0 L10.1111,1.05556 L3.88889,1.05556 L3.88889,0 L2.33333,0 L2.33333,1.05556 L1.55556,1.05556 C0.692222,1.05556 0.00777777,1.75556 0.00777777,2.61111 L0,12.5 C0,13.3556 0.692222,14 1.55556,14 L12.4444,14 C13.3,14 14,13.3556 14,12.5 L14,2.61111 C14,1.75556 13.3,1.05556 12.4444,1.05556 Z M12.4444,12.5 L1.55556,12.5 L1.55556,3.94444 L12.4444,3.94444 L12.4444,12.5 Z M8.55556,8.61111 L3.11111,8.61111 L3.11111,10.1667 L8.55556,10.1667 L8.55556,8.61111 Z"}),j=(0,f.I)({displayName:"TimeIcon",path:(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("path",{d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z"}),(0,n.jsx)("path",{d:"M17.134,15.81,12.5,11.561V6.5a1,1,0,0,0-2,0V12a1,1,0,0,0,.324.738l4.959,4.545a1.01,1.01,0,0,0,1.413-.061A1,1,0,0,0,17.134,15.81Z"})]})}),b=(0,f.I)({displayName:"EditIcon",path:(0,n.jsxs)("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2",children:[(0,n.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,n.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),v=(0,f.I)({displayName:"DeleteIcon",path:(0,n.jsx)("g",{fill:"currentColor",children:(0,n.jsx)("path",{d:"M19.452 7.5H4.547a.5.5 0 00-.5.545l1.287 14.136A2 2 0 007.326 24h9.347a2 2 0 001.992-1.819L19.95 8.045a.5.5 0 00-.129-.382.5.5 0 00-.369-.163zm-9.2 13a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zm5 0a.75.75 0 01-1.5 0v-9a.75.75 0 011.5 0zM22 4h-4.75a.25.25 0 01-.25-.25V2.5A2.5 2.5 0 0014.5 0h-5A2.5 2.5 0 007 2.5v1.25a.25.25 0 01-.25.25H2a1 1 0 000 2h20a1 1 0 000-2zM9 3.75V2.5a.5.5 0 01.5-.5h5a.5.5 0 01.5.5v1.25a.25.25 0 01-.25.25h-5.5A.25.25 0 019 3.75z"})})});var g=t(2355),y=t(6173),w=t(5486),O=t(172),L=t(4090),z=t(8121),S=t(8792),I=t(7907);function C(){let[e,r]=(0,w.F_)(O.I8),t=(0,I.useRouter)(),[f,C]=(0,L.useState)([]),[P,N]=(0,L.useState)([]),[E,D]=(0,L.useState)(null),[k,J]=(0,L.useState)([]),[A,M]=(0,L.useState)(!0),W=async()=>{var r;if(!e)return;M(!0);let t=(0,z.IO)((0,z.hJ)(O.db,"reservations"),(0,z.ar)("userId","==",e.uid)),n=(0,z.IO)((0,z.hJ)(O.db,"notifications"),(0,z.ar)("recipientId","==",e.uid)),i=(0,z.IO)((0,z.hJ)(O.db,"teacher-requests"),(0,z.ar)("email","==",e.email)),s=(0,z.IO)((0,z.hJ)(O.db,"payments"),(0,z.ar)("userId","==",e.uid)),[a,l,o,d]=await Promise.all([(0,z.PL)(t),(0,z.PL)(n),(0,z.PL)(i),(0,z.PL)(s)]);C(a.docs.map(e=>({id:e.id,...e.data()}))),N(l.docs.map(e=>e.data())),D((null===(r=o.docs[0])||void 0===r?void 0:r.data())||null),J(d.docs.map(e=>({id:e.id,...e.data()}))),M(!1)};(0,L.useEffect)(()=>{r||e?e&&W():t.push("/auth")},[e,r]);let _=async e=>{confirm("이 예약을 삭제하시겠습니까?")&&(await (0,z.oe)((0,z.JU)(O.db,"reservations",e)),W())},R=async e=>{await (0,z.r7)((0,z.JU)(O.db,"payments",e),{refundRequested:!0}),W()},Z=(0,i.ff)("white","gray.800");return r||A?(0,n.jsx)(s.W,{maxW:"lg",py:10,children:(0,n.jsx)(a.$,{})}):(0,n.jsx)(s.W,{maxW:"lg",py:10,fontFamily:"'Pretendard', sans-serif",children:(0,n.jsxs)(l.x,{p:8,bg:Z,rounded:"2xl",boxShadow:"2xl",children:[(0,n.jsx)(o.X,{size:"lg",mb:4,bgGradient:"linear(to-r, #7F53AC, #647DEE)",bgClip:"text",children:"마이페이지"}),(0,n.jsxs)(d.x,{fontSize:"lg",fontWeight:"bold",children:[(null==e?void 0:e.displayName)||"사용자"," 님 환영합니다!"]}),(0,n.jsxs)(d.x,{mb:4,color:"gray.600",children:["이메일: ",null==e?void 0:e.email]}),(0,n.jsx)(c.i,{my:6}),(0,n.jsxs)(o.X,{size:"md",mb:3,children:[(0,n.jsx)(u.J,{as:p,mr:2}),"나의 예약 내역"]}),0===f.length?(0,n.jsx)(d.x,{children:"예약 내역이 없습니다."}):(0,n.jsx)(h.g,{align:"start",spacing:3,mb:6,w:"full",children:f.map((e,r)=>(0,n.jsxs)(l.x,{p:4,bg:"gray.50",borderRadius:"xl",boxShadow:"md",w:"full",children:[(0,n.jsxs)(d.x,{children:[(0,n.jsx)(u.J,{as:p,mr:2}),"날짜: ",e.date]}),(0,n.jsxs)(d.x,{children:[(0,n.jsx)(u.J,{as:j,mr:2}),"시간: ",e.time]}),(0,n.jsxs)(d.x,{children:[(0,n.jsx)(u.J,{as:y.fzv,mr:2}),"강사: ",e.teacherName||"정보 없음"]}),(0,n.jsxs)(m.U,{spacing:3,mt:3,children:[(0,n.jsx)(S.default,{href:"/edit-reservation?id=".concat(e.id),children:(0,n.jsx)(x.z,{size:"sm",leftIcon:(0,n.jsx)(b,{}),rounded:"full",bgGradient:"linear(to-r, #7F53AC, #647DEE)",color:"white",_hover:{transform:"scale(1.05)",boxShadow:"xl"},children:"수정"})}),(0,n.jsx)(x.z,{size:"sm",leftIcon:(0,n.jsx)(v,{}),variant:"outline",colorScheme:"red",rounded:"full",fontWeight:"medium",_hover:{bg:"red.50",borderColor:"red.300"},onClick:()=>_(e.id),children:"삭제"})]})]},r))}),(0,n.jsx)(c.i,{my:6}),(0,n.jsxs)(o.X,{size:"md",mb:3,children:[(0,n.jsx)(u.J,{as:g.D,mr:2}),"나의 알림"]}),0===P.length?(0,n.jsx)(d.x,{children:"알림이 없습니다."}):(0,n.jsx)(h.g,{align:"start",spacing:2,mb:6,children:P.map((e,r)=>(0,n.jsxs)(l.x,{p:4,bg:"gray.50",borderRadius:"xl",boxShadow:"md",w:"full",children:[(0,n.jsx)(d.x,{fontWeight:"bold",children:e.title||"알림"}),(0,n.jsx)(d.x,{children:e.message})]},r))}),(0,n.jsx)(c.i,{my:6}),(0,n.jsxs)(o.X,{size:"md",mb:3,children:[(0,n.jsx)(u.J,{as:y.fzv,mr:2}),"강사 신청 현황"]}),E?(0,n.jsxs)(l.x,{p:3,border:"1px solid #ddd",rounded:"md",children:[(0,n.jsxs)(d.x,{children:["이름: ",E.name]}),(0,n.jsx)(d.x,{children:"상태: 신청 완료"})]}):(0,n.jsx)(d.x,{children:"강사 신청 기록이 없습니다."}),(0,n.jsx)(c.i,{my:6}),(0,n.jsxs)(o.X,{size:"md",mb:3,children:[(0,n.jsx)(u.J,{as:y.XiQ,mr:2}),"결제 내역"]}),0===k.length?(0,n.jsx)(d.x,{color:"gray.500",children:"결제 내역이 없습니다."}):(0,n.jsx)(h.g,{align:"start",spacing:3,mb:6,w:"full",children:k.map((e,r)=>{var t,i,s;return(0,n.jsxs)(l.x,{p:4,bg:"gray.50",borderRadius:"xl",boxShadow:"md",w:"full",children:[(0,n.jsxs)(d.x,{children:[(0,n.jsx)("b",{children:"상품명:"})," ",e.productName]}),(0,n.jsxs)(d.x,{children:[(0,n.jsx)("b",{children:"금액:"})," ",null===(t=e.amount)||void 0===t?void 0:t.toLocaleString(),"원"]}),(0,n.jsxs)(d.x,{children:[(0,n.jsx)("b",{children:"결제수단:"})," ",e.method]}),(0,n.jsxs)(d.x,{children:[(0,n.jsx)("b",{children:"결제일:"})," ",new Date(null===(s=e.timestamp)||void 0===s?void 0:null===(i=s.toDate)||void 0===i?void 0:i.call(s)).toLocaleString()]}),(0,n.jsxs)(m.U,{spacing:2,mt:2,children:[(0,n.jsx)(x.z,{size:"sm",colorScheme:"purple",variant:"outline",rounded:"full",children:"결제 상세"}),(0,n.jsx)(x.z,{size:"sm",colorScheme:"gray",variant:"outline",rounded:"full",children:"영수증 다운로드"}),(0,n.jsx)(x.z,{size:"sm",colorScheme:"red",variant:"outline",rounded:"full",onClick:()=>R(e.id),isDisabled:e.refundRequested,children:e.refundRequested?"환불 요청됨":"환불 요청"})]})]},r)})}),(0,n.jsx)(c.i,{my:6}),(0,n.jsxs)(m.U,{justifyContent:"space-between",children:[(0,n.jsx)(S.default,{href:"/auth",children:(0,n.jsx)(x.z,{bgGradient:"linear(to-r, #7F53AC, #647DEE)",color:"white",rounded:"full",fontWeight:"semibold",_hover:{transform:"scale(1.05)",boxShadow:"xl"},transition:"all 0.2s ease-in-out",children:"회원정보 수정"})}),(0,n.jsx)(S.default,{href:"/logout",children:(0,n.jsx)(x.z,{variant:"ghost",colorScheme:"red",rounded:"full",children:"로그아웃"})})]})]})})}},7907:function(e,r,t){"use strict";var n=t(5313);t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(r,{useSearchParams:function(){return n.useSearchParams}})},2355:function(e,r,t){"use strict";t.d(r,{D:function(){return n}});let n=(0,t(2008).I)({displayName:"BellIcon",d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})},5483:function(e,r,t){"use strict";t.d(r,{i:function(){return d}});var n=t(3827),i=t(2160),s=t(235),a=t(4413),l=t(1295),o=t(8772);let d=(0,a.G)(function(e,r){let{borderLeftWidth:t,borderBottomWidth:a,borderTopWidth:d,borderRightWidth:c,borderWidth:u,borderStyle:h,borderColor:m,...x}=(0,l.m)("Divider",e),{className:f,orientation:p="horizontal",__css:j,...b}=(0,i.L)(e);return(0,n.jsx)(o.m.hr,{ref:r,"aria-orientation":p,...b,__css:{...x,border:"0",borderColor:m,borderStyle:h,...{vertical:{borderLeftWidth:t||c||u||"1px",height:"100%"},horizontal:{borderBottomWidth:a||d||u||"1px",width:"100%"}}[p],...j},className:(0,s.cx)("chakra-divider",f)})});d.displayName="Divider"},2008:function(e,r,t){"use strict";t.d(r,{I:function(){return l}});var n=t(3827),i=t(4090),s=t(1890),a=t(4413);function l(e){let{viewBox:r="0 0 24 24",d:t,displayName:l,defaultProps:o={}}=e,d=i.Children.toArray(e.path),c=(0,a.G)((e,i)=>(0,n.jsx)(s.J,{ref:i,viewBox:r,...o,...e,children:d.length?d:(0,n.jsx)("path",{fill:"currentColor",d:t})}));return c.displayName=l,c}},1698:function(e,r,t){"use strict";t.d(r,{U:function(){return s}});var n=t(3827),i=t(414);let s=(0,t(4413).G)((e,r)=>(0,n.jsx)(i.K,{align:"center",...e,direction:"row",ref:r}));s.displayName="HStack"},158:function(e,r,t){"use strict";t.d(r,{w_:function(){return c}});var n=t(4090),i={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=n.createContext&&n.createContext(i),a=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach(function(r){var n,i;n=r,i=t[r],(n=function(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:r+""}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function c(e){return r=>n.createElement(u,l({attr:d({},e.attr)},r),function e(r){return r&&r.map((r,t)=>n.createElement(r.tag,d({key:t},r.attr),e(r.child)))}(e.child))}function u(e){var r=r=>{var t,{attr:i,size:s,title:o}=e,c=function(e,r){if(null==e)return{};var t,n,i=function(e,r){if(null==e)return{};var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(r.indexOf(n)>=0)continue;t[n]=e[n]}return t}(e,r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)t=s[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}(e,a),u=s||r.size||"1em";return r.className&&(t=r.className),e.className&&(t=(t?t+" ":"")+e.className),n.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,c,{className:t,style:d(d({color:e.color||r.color},r.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&n.createElement("title",null,o),e.children)};return void 0!==s?n.createElement(s.Consumer,null,e=>r(e)):r(i)}}},function(e){e.O(0,[358,315,956,719,677,402,486,892,971,69,560],function(){return e(e.s=7211)}),_N_E=e.O()}]);